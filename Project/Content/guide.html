<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FurFect Match - Guides</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #fffbe9;
  --sidebar: #f7d79e;
  --highlight: #f78c56;
  --card-bg: #d2c5f5;
  font-family: 'Poppins', sans-serif;
}
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  display: flex;
  min-height: 100vh;
  background: var(--bg);
  color: #111114;
  transition: all 0.3s ease;
}

.sidebar {
  background: var(--sidebar);
  width: 220px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  transition: all 0.3s ease;
}

.logo { text-align: center; font-weight: bold; margin-bottom: 20px; font-size: 18px; }
.logo span { color: red; }

.profile-wrapper { position: relative; width: 90px; height: 90px; margin-bottom: 10px; }
.profile-wrapper img { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; border: 2px solid #333; }
.upload-btn {
  position: absolute; bottom: 0; right: 0;
  background: var(--highlight); color: white;
  width: 24px; height: 24px; border-radius: 50%;
  display: flex; justify-content: center; align-items: center;
  font-size: 16px; font-weight: bold; cursor: pointer; border: 2px solid #fff;
}
#profileInput { display: none; }

.username { font-weight: 600; margin-bottom: 20px; text-align: center; }

.menu { width: 100%; flex-grow: 1; }
.menu a {
  display: block; padding: 10px; text-decoration: none;
  color: #111114; font-weight: 500; border-bottom: 1px solid black;
}
.menu a.active { color: var(--highlight); font-weight: 600; }

.logout-btn {
  display: block; 
  width: 100%; 
  padding: 10px; 
  margin-top: 10px;
  text-align: center; text-decoration: none; color: #111114;
  background: #f78c56; border-radius: 8px; font-weight: 600;
}
.logout-btn:hover { background: #f55c2b; color: white; }

.topbar {
  background: #c5b7e9; display: flex; justify-content: flex-start; align-items: center; padding: 12px 20px;
}
.topbar .menu-btn { font-size: 22px; cursor: pointer; display: none; }

.main { flex: 1; display: flex; flex-direction: column; }
.content { padding: 20px; text-align: center; }

.content h2 { margin-bottom: 10px; }
.content p { margin-bottom: 30px; color: #333; }

.section-title { text-align: left; font-weight: 600; margin: 20px 0 15px; }
.guide-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 20px;
}

.guide-card {
  display: block; text-decoration: none; color: inherit;
  background: #fff; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  padding: 16px; transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.guide-card:hover { transform: translateY(-4px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
.guide-card img { width: 100%; height: 140px; border-radius: 12px; object-fit: cover; margin-bottom: 8px; }
.guide-card p { font-weight: 600; }

@media (max-width: 768px) {
  body { flex-direction: column; }
  .sidebar {
    position: absolute; left: -250px; top: 0; height: 100%; z-index: 1000;
  }
  .sidebar.open { left: 0; }
  .topbar .menu-btn { display: block; }
  .close-btn {
    display: block; position: absolute; top: 10px; right: 10px;
    background: var(--highlight); color: #fff; font-size: 18px; font-weight: bold;
    width: 28px; height: 28px; border-radius: 50%; text-align: center; line-height: 28px; cursor: pointer;
  }
}
@media (min-width: 769px) { .close-btn { display: none; } }
</style>
</head>
<body>

<div class="sidebar" id="sidebar">
  <div class="close-btn" onclick="toggleSidebar()">Ã—</div>
  <div class="logo">FUR<span>FECT</span> MATCH</div>
  <div class="profile-wrapper">
    <img id="profilePic" src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Profile">
    <div class="upload-btn" onclick="document.getElementById('profileInput').click()">+</div>
    <input type="file" id="profileInput" accept="image/*">
  </div>
  <div class="username" id="username">USERNAME</div>
  <div class="menu">
    <a href="dashboard.html">Dashboard</a>
    <a href="carecenter.html">Care Center</a>
    <a href="adoptioncenter.html">Adoption Center</a>
    <a href="guide.html" class="active">Guides</a>
    <a href="login.html" class="logout-btn">ðŸ”Œ Logout</a>
  </div>
  
</div>

<div class="main">
  <div class="topbar">
    <div class="menu-btn" onclick="toggleSidebar()">â˜°</div>
  </div>

  <div class="content">
    <h2>GUIDES ON TAKING CARE OF PETS</h2>
    <p>Click to see the guide</p>

    <h3 class="section-title">CAT BREEDS</h3>
    <div class="guide-grid">
      <a href="guides/puspin.html" class="guide-card"><img src="catimages/Puspin.jpg" alt="Puspin"><p>PUSPIN</p></a>
      <a href="guides/siamese.html" class="guide-card"><img src="catimages/siamese.jpg" alt="Siamese"><p>SIAMESE</p></a>
      <a href="guides/persian.html" class="guide-card"><img src="catimages/persian.jpg" alt="Persian"><p>PERSIAN</p></a>
      <a href="guides/mainecoon.html" class="guide-card"><img src="catimages/meincoon.jpg" alt="Maine Coon"><p>MAINE COON</p></a>
      <a href="guides/ragdoll.html" class="guide-card"><img src="catimages/ragdoll.jpg" alt="Ragdoll"><p>RAGDOLL</p></a>
      <a href="guides/bengal.html" class="guide-card"><img src="catimages/bengal.jpg" alt="Bengal"><p>BENGAL</p></a>
      <a href="guides/scottish.html" class="guide-card"><img src="catimages/scottish.jpg" alt="Scottish Fold"><p>SCOTTISH FOLD</p></a>
      <a href="guides/russianblue.html" class="guide-card"><img src="catimages/russian.jpg" alt="Russian Blue"><p>RUSSIAN BLUE</p></a>
      <a href="guides/abyssinian.html" class="guide-card"><img src="catimages/abbysinian.jpg" alt="Abyssinian"><p>ABYSSINIAN</p></a>
      <a href="guides/sphynx.html" class="guide-card"><img src="catimages/sphynx.jpg" alt="Sphynx"><p>SPHYNX</p></a>
    </div>

    <h3 class="section-title">DOG BREEDS</h3>
    <div class="guide-grid">
      <a href="guides/aspin.html" class="guide-card"><img src="dogimages/aspin.jpg" alt="Aspin"><p>ASPIN</p></a>
      <a href="guides/shihtzu.html" class="guide-card"><img src="dogimages/Shih Tzu Dog.jpg" alt="Shih Tzu"><p>SHIH TZU</p></a>
      <a href="guides/pomeranian.html" class="guide-card"><img src="dogimages/pomeranian.jpg" alt="Pomeranian"><p>POMERANIAN</p></a>
      <a href="guides/labrador.html" class="guide-card"><img src="dogimages/White Labrador.jpg" alt="Labrador"><p>LABRADOR</p></a>
      <a href="guides/goldenretriever.html" class="guide-card"><img src="dogimages/golden.jpg" alt="Golden Retriever"><p>GOLDEN RETRIEVER</p></a>
      <a href="guides/germanshepherd.html" class="guide-card"><img src="dogimages/german.jpg" alt="German Shepherd"><p>GERMAN SHEPHERD</p></a>
      <a href="guides/beagle.html" class="guide-card"><img src="dogimages/Beagle.jpg" alt="Beagle"><p>BEAGLE</p></a>
      <a href="guides/bulldog.html" class="guide-card"><img src="dogimages/English Bulldog.jpg" alt="Bulldog"><p>BULLDOG</p></a>
      <a href="guides/rottweiler.html" class="guide-card"><img src="dogimages/so cute rottweiler.jpg" alt="Rottweiler"><p>ROTTWEILER</p></a>
      <a href="guides/siberianhusky.html" class="guide-card"><img src="dogimages/Siberian Husky.jpg" alt="Siberian Husky"><p>SIBERIAN HUSKY</p></a>
    </div>
  </div>
</div>

<script>
function toggleSidebar() { document.getElementById('sidebar').classList.toggle('open'); }

async function loadUser() {
  const email = localStorage.getItem("userEmail");
  if (!email) return;
  try {
    const res = await fetch(`http://localhost:5000/api/user?email=${email}`);
    const data = await res.json();
    if (data.success) {
      document.getElementById("username").textContent = data.firstName;
      if (data.profileImage) document.getElementById("profilePic").src = data.profileImage;
    }
  } catch (err) { console.error("Error fetching user:", err); }
}

document.getElementById("profileInput").addEventListener("change", async function () {
  const file = this.files[0]; if (!file) return;
  const email = localStorage.getItem("userEmail"); if (!email) return alert("No email found in localStorage!");
  const formData = new FormData();
  formData.append("profileImage", file);
  formData.append("email", email);
  try {
    const res = await fetch("http://localhost:5000/api/upload-profile", { method: "POST", body: formData });
    const data = await res.json();
    if (data.success) document.getElementById("profilePic").src = data.profileImage;
    else alert("Failed to upload profile picture.");
  } catch (err) { console.error("Upload error:", err); }
});

window.onload = () => { loadUser(); };
</script>

</body>
</html>
